<!Doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- 부트스트랩 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!--    부트스트랩-->
    <!--    아이콘-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!--    아이콘-->
    <!-- header css -->
    <link rel="stylesheet" th:href="@{/css/header.css}">

    <style>
        .search-container {
            border: 2px solid black; /* 테두리 색상 */
            border-radius: 5px; /* 테두리 모서리 둥글게 */
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1); /* 그림자 추가 */
            color: black; /* 텍스트 색상 설정 */
        }

        #searchData {
            border: none; /* 검색 입력창에는 별도의 테두리 제거 */
            background-color: whitesmoke; /* 배경색상 설정 */

            .custom-textarea {
                width: 100%; /* 너비 100% */
                height: 200px; /* 높이 200px로 설정 */
            }
        }
    </style>

    <title>시나리오 생성</title>

</head>
<body>

<div th:replace="~{/includes/header :: header}"></div>
<div class="container text-center mt-5">

    <!-- 검색 입력 부분 -->
    <div class="row search-container mb-3">
        <div class="col-12 d-flex py-1">
            <input id="searchData" class="form-control me-2" type="search" placeholder="키를 검색하세요"
                   aria-label="Search">
            <button id="searchBtn" class="btn btn-outline-primary" type="button">
                <svg style="display:inline-block" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                     fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                    <path
                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                </svg>
            </button>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group col-md-3">
            <label for="keys">키 </label>
            <select id="keys" name="keys" class="form-control">
                <option value="region">지역</option>
                <option value="age">나이</option>
                <option value="customer-id">고객번호</option>
                <option value="product-name">상품이름</option>
                <option value="price">가격</option>
            </select>
        </div>

        <div class="form-group col-md-3">
            <label for="comparison-operator">부등호 선택 </label>
            <select id="comparison-operator" name="comparison-operator" class="form-control">
                <option value="">&lt; (미만)</option>
                <option value="greater-than">&gt; (초과)</option>
                <option value="less-than-or-equal">&le; (이하)</option>
                <option value="greater-than-or-equal">&ge; (이상)</option>
                <option value="equal">= (같음)</option>
                <option value="not-equal">!= (다름)</option>
            </select>
        </div>

        <div class="form-group col-md-3">
            <label for="fruits">필터링 정보 </label>
            <select id="fruits" name="fruits" class="form-control">
                <option value="apple">Apple</option>
                <option value="banana">Banana</option>
                <option value="orange">Orange</option>
                <option value="grape">Grape</option>
            </select>
        </div>

        <div class="form-group col-md-3">
            <label for="filter-input">입력</label>
            <input id="filter-input" class="form-control" type="text" placeholder="입력">
        </div>
    </div>

    <div id="operator-select-div" class="form-group">
        <label for="logical-operator">연산자 선택</label>
        <select id="logical-operator" name="logical-operator" class="form-control">
            <option value="and">AND</option>
            <option value="or">OR</option>
        </select>
    </div>


    <div class="row pb-3">
        <div class="col">
            <!-- 플러스 버튼 모달 토글 버튼 -->
            <button id="add-filter-btn" type="button" class="btn btn-primary" >
                필터 추가
            </button>
        </div>
    </div>


    <!-- 테이블 부분 -->
    <div class="row justify-content-center">
        <div class="col-12">
            <table class="table">
                <thead class="table-dark">
                <tr>
                    <th scope="col">KEY-NAME</th>
                    <th scope="col">OPTION</th>
                    <th scope="col">VALUE | INPUT</th>
                    <th scope="col">#</th>
                </tr>
                </thead>
                <tbody id="filter-table-body">
                <tr onclick="highlightRow(this)" data-bs-toggle="modal" data-bs-target="#sidebarModal">
                    <td>나이</td>
                    <td><(미만)</td>
                    <td>20</td>
                    <th scope="row">
                        <button class="btn btn-danger deleteBtn">삭제</button>
                    </th>
                </tr>
                <!-- 나머지 테이블 행들도 동일하게 작성 -->
                </tbody>
            </table>
            <div class="row pb-3">
                <div class="col">
                    <!-- 플러스 버튼 모달 토글 버튼 -->
                    <button type="button" class="btn btn-danger">
                        시나리오 생성
                    </button>
                </div>
            </div>
            <div class="d-grid gap-2">
                <a class="btn btn-outline-primary" type="button" href="\scenario-management"><b>+Go To Manage Scenario+</b></a>
                <a class="btn btn-outline-primary" type="button" href="\key-management"><b>+Go To Manage Keys+</b></a>
            </div>
        </div>
    </div>

</div>

<div th:replace="~{/includes/footer :: footer}"></div>
<!-- 제이쿼리 추가 -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script>
    // 행 추가 버튼 클릭 시 실행되는 함수
    $('#add-filter-btn').on('click', function () {
        // 새로운 행을 생성
        var newRow = $('<tr>').append(
            $('<td>').text('새로 선택한 키이름'),
            $('<td>').text('새로 선택한 옵션 '),
            $('<td>').text('새로 입력 또는 선택한 값'),
            $('<td>').append('<button class="btn btn-danger deleteBtn">삭제</button>')
        );

        // 생성한 행을 테이블에 추가
        $('#filter-table-body').append(newRow);

        // 테이블 행이 2개 이상일 때만 조건부 div를 보여줌
        if ($('#filter-table-body tr').length >= 2) {
            $('#operator-select-div').show();
        }
    });

    // 테이블에서 삭제 버튼 클릭 시 실행되는 함수
    $('#filter-table-body').on('click', '.deleteBtn', function () {
        // 현재 행을 삭제
        $(this).closest('tr').remove();

        // 테이블 행이 2개 미만이면 조건부 div를 숨김
        if ($('#filter-table-body tr').length < 2) {
            $('#operator-select-div').hide();
        }
    });
</script>
</body>
</html>